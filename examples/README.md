# ãƒ‡ãƒ¢ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

ã“ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã¯ã€ç›¸ç¶šè¨ˆç®—æ©Ÿã®å„æ©Ÿèƒ½ã‚’ãƒ‡ãƒ¢ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚

## ğŸ“‹ ãƒ‡ãƒ¢ã‚¹ã‚¯ãƒªãƒ—ãƒˆä¸€è¦§

### 1. `demo_basic_cases.py` - åŸºæœ¬çš„ãªç›¸ç¶šã‚±ãƒ¼ã‚¹

åŸºæœ¬çš„ãªç›¸ç¶šãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ãƒ‡ãƒ¢ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã—ã¾ã™ã€‚

```bash
uv run python examples/demo_basic_cases.py
```

**ãƒ‡ãƒ¢å†…å®¹:**
- é…å¶è€…ã¨å­ã®ã‚±ãƒ¼ã‚¹
- é…å¶è€…ã¨ç›´ç³»å°Šå±ã®ã‚±ãƒ¼ã‚¹
- é…å¶è€…ã¨å…„å¼Ÿå§‰å¦¹ã®ã‚±ãƒ¼ã‚¹
- é…å¶è€…ã®ã¿ã®ã‚±ãƒ¼ã‚¹

### 2. `demo_complex_cases.py` - è¤‡é›‘ãªç›¸ç¶šã‚±ãƒ¼ã‚¹

ä»£è¥²ç›¸ç¶šã‚„ç‰¹æ®Šã‚±ãƒ¼ã‚¹ã‚’ãƒ‡ãƒ¢ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã—ã¾ã™ã€‚

```bash
uv run python examples/demo_complex_cases.py
```

**ãƒ‡ãƒ¢å†…å®¹:**
- ä»£è¥²ç›¸ç¶šï¼ˆå­ã®ä»£è¥²ï¼‰
- ä»£è¥²ç›¸ç¶šï¼ˆå…„å¼Ÿå§‰å¦¹ã®ä»£è¥²ï¼‰
- åŠè¡€å…„å¼Ÿå§‰å¦¹
- ç›¸ç¶šæ”¾æ£„
- å†è»¢ç›¸ç¶š

### 3. `demo_interactive.py` - å¯¾è©±å‹ãƒ‡ãƒ¢

å¯¾è©±å‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’ãƒ‡ãƒ¢ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã—ã¾ã™ã€‚

```bash
uv run python examples/demo_interactive.py
```

**ãƒ‡ãƒ¢å†…å®¹:**
- ã‚¹ãƒ†ãƒƒãƒ—ãƒã‚¤ã‚¹ãƒ†ãƒƒãƒ—ã®å…¥åŠ›
- å¯¾è©±å‹ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¨ˆç®—

### 4. `demo_contact_collection.py` - é€£çµ¡å…ˆæƒ…å ±åé›† **[NEW]**

é€£çµ¡å…ˆæƒ…å ±åé›†æ©Ÿèƒ½ã‚’ãƒ‡ãƒ¢ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã—ã¾ã™ã€‚

```bash
uv run python examples/demo_contact_collection.py
```

**ãƒ‡ãƒ¢å†…å®¹:**
- ç›¸ç¶šè¨ˆç®—å¾Œã®é€£çµ¡å…ˆæƒ…å ±åé›†
- ä½æ‰€ã€é›»è©±ç•ªå·ã€ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®å…¥åŠ›
- ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½
- é€£çµ¡å…ˆã‚µãƒãƒªãƒ¼è¡¨ç¤º
- å„ç¨®ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆï¼ˆMarkdown, PDF, CSVï¼‰

**å®Ÿè¡Œä¾‹:**

```
Step 1: ã‚µãƒ³ãƒ—ãƒ«ç›¸ç¶šã‚±ãƒ¼ã‚¹ã®ä½œæˆ
è¢«ç›¸ç¶šäºº: å±±ç”°å¤ªéƒï¼ˆæ•…äººï¼‰
ç›¸ç¶šäºº: å±±ç”°èŠ±å­ï¼ˆé…å¶è€…ï¼‰ã€å±±ç”°ä¸€éƒï¼ˆå­ï¼‰ã€å±±ç”°äºŒéƒï¼ˆå­ï¼‰

Step 2: ç›¸ç¶šè¨ˆç®—çµæœã®è¡¨ç¤º
[ç›¸ç¶šè¨ˆç®—çµæœãƒ†ãƒ¼ãƒ–ãƒ«è¡¨ç¤º]

Step 3: é€£çµ¡å…ˆæƒ…å ±ã®åé›†
ç›¸ç¶šäººã®é€£çµ¡å…ˆæƒ…å ±ã‚’å…¥åŠ›ã—ã¾ã™ã‹ï¼Ÿ [y/n] (y): y

ã€å±±ç”°èŠ±å­ã€‘ã®é€£çµ¡å…ˆæƒ…å ±
ä½æ‰€: æ±äº¬éƒ½æ¸‹è°·åŒºæ¸‹è°·1-1-1
é›»è©±ç•ªå·: 03-1234-5678
ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹: hanako@example.com
âœ“ é€£çµ¡å…ˆæƒ…å ±ã‚’ç™»éŒ²ã—ã¾ã—ãŸ

ã€å±±ç”°ä¸€éƒã€‘ã®é€£çµ¡å…ˆæƒ…å ±
...

Step 4: é€£çµ¡å…ˆã‚µãƒãƒªãƒ¼ã®è¡¨ç¤º
[é€£çµ¡å…ˆæƒ…å ±ãƒ†ãƒ¼ãƒ–ãƒ«è¡¨ç¤º]

Step 5: ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
âœ“ Markdownãƒ¬ãƒãƒ¼ãƒˆ: output/contact_demo_report.md
âœ“ PDFãƒ¬ãƒãƒ¼ãƒˆ: output/contact_demo_report.pdf
âœ“ CSVé€£çµ¡å…ˆ: output/contact_demo_contacts.csv

âœ“ ãƒ‡ãƒ¢å®Œäº†ï¼
```

## ğŸ“‚ ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿

`data/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã¯ã€ãƒ‡ãƒ¢ã§ä½¿ç”¨ã™ã‚‹ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚

### JSONå½¢å¼

```bash
# åŸºæœ¬ã‚±ãƒ¼ã‚¹
examples/data/basic_case.json

# ä»£è¥²ç›¸ç¶šã‚±ãƒ¼ã‚¹
examples/data/substitution_case.json

# è¤‡é›‘ã‚±ãƒ¼ã‚¹
examples/data/complex_case.json
```

### CSVå½¢å¼

```bash
# CSVãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
examples/data/template.csv

# ã‚µãƒ³ãƒ—ãƒ«ã‚±ãƒ¼ã‚¹
examples/data/sample_case.csv
```

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### 1. ã™ã¹ã¦ã®ãƒ‡ãƒ¢ã‚’é †ç•ªã«å®Ÿè¡Œ

```bash
# åŸºæœ¬ã‚±ãƒ¼ã‚¹
uv run python examples/demo_basic_cases.py

# è¤‡é›‘ã‚±ãƒ¼ã‚¹
uv run python examples/demo_complex_cases.py

# å¯¾è©±å‹ãƒ‡ãƒ¢
uv run python examples/demo_interactive.py

# é€£çµ¡å…ˆåé›†ãƒ‡ãƒ¢ï¼ˆNEWï¼‰
uv run python examples/demo_contact_collection.py
```

### 2. ç‰¹å®šã®ã‚±ãƒ¼ã‚¹ã®ã¿å®Ÿè¡Œ

CLIã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ç‰¹å®šã®ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰è¨ˆç®—ã§ãã¾ã™ã€‚

```bash
# JSONãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰
uv run python -m src.cli.main calc -i examples/data/basic_case.json -o output/result.md

# CSVãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰
uv run python -m src.cli.main calc -i examples/data/sample_case.csv -o output/result.pdf
```

### 3. é€£çµ¡å…ˆæƒ…å ±ä»˜ããƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ

```bash
# è¨ˆç®— â†’ é€£çµ¡å…ˆåé›† â†’ ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆï¼ˆè‡ªå‹•ï¼‰
uv run python -m src.cli.main calc -i examples/data/basic_case.json -o output/report.pdf

# PDFãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆæ™‚ã«é€£çµ¡å…ˆCSVã‚‚ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
# â†’ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§ "y" ã‚’é¸æŠ
```

## ğŸ“ ã‚«ã‚¹ã‚¿ãƒ ãƒ‡ãƒ¢ã®ä½œæˆ

ç‹¬è‡ªã®ãƒ‡ãƒ¢ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½œæˆã™ã‚‹å ´åˆã®åŸºæœ¬ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ:

```python
from datetime import date
from fractions import Fraction

from src.models.person import Person
from src.models.inheritance import InheritanceResult, Heir, HeritageRank, SubstitutionType
from src.services.inheritance_calculator import InheritanceCalculator
from src.cli.contact_input import ContactInfoCollector
from src.cli.report_generator import ReportGenerator
from src.cli.display import display_result

def main():
    # 1. è¢«ç›¸ç¶šäººã¨ç›¸ç¶šäººå€™è£œã®ä½œæˆ
    decedent = Person(
        name="è¢«ç›¸ç¶šäºº",
        is_decedent=True,
        is_alive=False,
        death_date=date(2025, 6, 15)
    )

    spouse = Person(name="é…å¶è€…", is_alive=True)
    child = Person(name="å­", is_alive=True)

    # 2. ç›¸ç¶šè¨ˆç®—
    calculator = InheritanceCalculator()
    result = calculator.calculate(
        decedent=decedent,
        spouses=[spouse],
        children=[child],
        parents=[],
        siblings=[]
    )

    # 3. çµæœè¡¨ç¤º
    display_result(result)

    # 4. é€£çµ¡å…ˆæƒ…å ±åé›†
    collector = ContactInfoCollector()
    updated_persons = collector.collect_contact_info_for_heirs(result)

    # 5. ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
    if updated_persons:
        ReportGenerator.generate_pdf(result, Path("output/my_report.pdf"))
        ReportGenerator.export_contact_csv(result, Path("output/contacts.csv"))

if __name__ == "__main__":
    main()
```

## ğŸ” ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### å•é¡Œ: ãƒ‡ãƒ¢ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒå®Ÿè¡Œã§ããªã„

**åŸå› **: ä¾å­˜é–¢ä¿‚ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ãªã„

**è§£æ±ºæ–¹æ³•**:

```bash
# ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
uv sync

# ä»®æƒ³ç’°å¢ƒã®æœ‰åŠ¹åŒ–ã‚’ç¢ºèª
uv run python --version
```

### å•é¡Œ: é€£çµ¡å…ˆå…¥åŠ›ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒè¡¨ç¤ºã•ã‚Œãªã„

**åŸå› **: éå¯¾è©±ç’°å¢ƒï¼ˆãƒ‘ã‚¤ãƒ—ã‚„ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆï¼‰ã§å®Ÿè¡Œã—ã¦ã„ã‚‹

**è§£æ±ºæ–¹æ³•**:

å¯¾è©±ã‚·ã‚§ãƒ«ã‹ã‚‰ç›´æ¥å®Ÿè¡Œã—ã¦ãã ã•ã„:

```bash
# æ­£ã—ã„å®Ÿè¡Œæ–¹æ³•
uv run python examples/demo_contact_collection.py

# èª¤ã£ãŸå®Ÿè¡Œæ–¹æ³•ï¼ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒè¡¨ç¤ºã•ã‚Œãªã„ï¼‰
echo "y" | uv run python examples/demo_contact_collection.py
```

### å•é¡Œ: PDFç”Ÿæˆã§ãƒ•ã‚©ãƒ³ãƒˆã‚¨ãƒ©ãƒ¼

**åŸå› **: IPAãƒ•ã‚©ãƒ³ãƒˆãŒè¦‹ã¤ã‹ã‚‰ãªã„

**è§£æ±ºæ–¹æ³•**:

ReportGeneratorã¯è‡ªå‹•çš„ã«IPAãƒ•ã‚©ãƒ³ãƒˆã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ãŒã€æ‰‹å‹•ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚‚å¯èƒ½ã§ã™:

```bash
# macOS
brew install ipa-fonts

# Ubuntu/Debian
sudo apt-get install fonts-ipafont
```

## ğŸ“š é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¬ã‚¤ãƒ‰](../docs/user_guide.md) - è©³ç´°ãªä½¿ã„æ–¹
- [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆæ›¸](../docs/architecture.md) - ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆ
- [CLAUDE.md](../CLAUDE.md) - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä»•æ§˜æ›¸

---

**æœ€çµ‚æ›´æ–°æ—¥**: 2025å¹´10æœˆ17æ—¥
